(()=>{(function(){const n=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:void 0;if(!n)return;const o=n.__RETARGLOW_PIXEL__||{},r=n.document;function c(t){if(typeof t!="string"||!t)return null;try{const e=new URL(t,n.location?n.location.href:void 0);return e.protocol==="http:"&&(e.protocol="https:",e.port=""),e.origin}catch(e){return null}}function s(){const t=c(o.endpoint);if(t)return t;try{if(n.location&&n.location.origin){const e=c(n.location.origin);if(e)return e}}catch(e){}return"https://retarglow.com"}const f=s().replace(/\/$/,""),d=f+"/b";function p(){if(typeof o.url=="string")return o.url;try{if(r&&r.location&&typeof r.location.href=="string")return r.location.href;if(n.location&&typeof n.location.href=="string")return n.location.href}catch(t){}return null}function h(){if(!n.screen)return null;const t=Number(n.screen.width)||0,e=Number(n.screen.height)||0;return!t||!e?null:t+"x"+e}const g={cid:typeof o.cid=="string"?o.cid:null,u:p(),sr:h()};let l=!1;function y(t,e){return typeof e=="string"&&e?e:typeof t!="string"||t.length===0?null:`${f}/frame?plan=${encodeURIComponent(t)}`}function m(t){if(!r||!t||l)return;l=!0;const e=r.createElement("iframe");e.src=t,e.setAttribute("sandbox","allow-scripts allow-same-origin"),e.setAttribute("referrerpolicy","no-referrer"),e.setAttribute("aria-hidden","true"),e.setAttribute("tabindex","-1"),e.style.cssText="position:absolute;width:1px;height:1px;overflow:hidden;clip:rect(0,0,0,0);opacity:0;border:0;pointer-events:none;";const i=r.body||r.documentElement;i&&i.appendChild(e)}function b(t){if(!t)return;let e=null,i=null;typeof t=="object"&&t!==null&&(typeof t.plan=="string"&&t.plan&&(e=t.plan),typeof t.frame_src=="string"&&t.frame_src&&(i=t.frame_src));const u=y(e,i);if(!u)return;const a=()=>m(u);!r||r.readyState==="complete"||r.readyState==="interactive"?a():r.addEventListener("DOMContentLoaded",a,{once:!0})}function w(){try{const t=JSON.stringify(g);return n.fetch(d,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:t})}catch(t){return Promise.reject(t)}}w().then(t=>!t||!t.ok?null:t.json().catch(()=>null)).then(b).catch(()=>{})})();})();