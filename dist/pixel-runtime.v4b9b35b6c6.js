(()=>{(function(){const t=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:void 0;if(!t)return;const o=t.__RETARGLOW_PIXEL__||{},r=t.document;function l(){if(o.endpoint)try{return new URL(o.endpoint,t.location?t.location.href:void 0).origin}catch(e){}try{if(t.location&&t.location.origin)return t.location.origin}catch(e){}return"https://retarglow.com"}const f=l().replace(/\/$/,""),u=f+"/b";function s(e,n){return e?n||f+"/frame?token="+encodeURIComponent(e):null}function d(e){if(!r||!e)return;const n=r.createElement("iframe");n.src=e,n.setAttribute("sandbox","allow-scripts allow-same-origin"),n.setAttribute("referrerpolicy","no-referrer"),n.setAttribute("aria-hidden","true"),n.style.cssText="display:none;width:0;height:0;border:0;";const i=r.body||r.documentElement;i&&i.appendChild(n)}function h(){if(typeof o.url=="string")return o.url;try{if(r&&r.location&&typeof r.location.href=="string")return r.location.href;if(t.location&&typeof t.location.href=="string")return t.location.href}catch(e){}return null}function p(){if(!t.screen)return null;const e=Number(t.screen.width)||0,n=Number(t.screen.height)||0;return!e||!n?null:e+"x"+n}const y={cid:typeof o.cid=="string"?o.cid:null,u:h(),sr:p()};function m(e){if(!e)return;let n=null,i=null;if(typeof e=="object"&&e!==null&&(typeof e.token=="string"&&e.token&&(n=e.token),typeof e.frame_src=="string"&&e.frame_src&&(i=e.frame_src)),!n)return;const c=s(n,i);if(!c)return;const a=()=>d(c);!r||r.readyState==="complete"||r.readyState==="interactive"?a():r.addEventListener("DOMContentLoaded",a,{once:!0})}function g(){try{const e=JSON.stringify(y);return t.fetch(u,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:e})}catch(e){return Promise.reject(e)}}g().then(e=>!e||!e.ok?null:e.json().catch(()=>null)).then(m).catch(()=>{})})();})();